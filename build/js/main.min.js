(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var _iosVhFix = require("./utils/ios-vh-fix");
var _initAccordion = require("./modules/accordion/init-accordion");
var _niceSelect = _interopRequireDefault(require("./../js/vendor/nice-select2"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
window.addEventListener('DOMContentLoaded', function () {
  (0, _iosVhFix.iosVhFix)();
  var burger = document.querySelector('.burger');
  var menu = document.querySelector('.menu');
  burger.addEventListener('click', function () {
    menu.classList.toggle('show');
    menu.classList.toggle('hide');
    burger.classList.toggle('active');
    document.querySelector('body').classList.toggle('dark');
  });
  var bodyElement = document.body;
  function handleWindowResize() {
    var windowWidth = window.innerWidth;
    if (windowWidth >= 768) {
      bodyElement.classList.remove('dark');
      menu.classList.remove('show');
      menu.classList.add('hide');
      burger.classList.remove('active');
    }
  }
  window.addEventListener('resize', handleWindowResize);

  //filter-modal
  var filtersToggle = document.querySelector('.competitions-list__filter-mobile-button');
  var filtersContainer = document.querySelector('.filters');
  var filtersClose = document.querySelector('.filters__button-close');
  if (filtersToggle) {
    filtersToggle.addEventListener('click', function () {
      filtersContainer.classList.toggle('active');
      document.querySelector('body').classList.toggle('dark-modal');
    });
    filtersClose.addEventListener('click', function () {
      filtersContainer.classList.remove('active');
      document.querySelector('body').classList.remove('dark-modal');
    });
  }
  window.addEventListener('resize', function () {
    var windowWidth = window.innerWidth;
    if (windowWidth >= 768 && filtersContainer) {
      filtersContainer.classList.remove('active');
      document.querySelector('body').classList.remove('dark-modal');
    }
  });

  //sort
  function sortCompetitions(sortBy) {
    var competitionList = document.querySelectorAll('.competitions__item');
    var competitionItemsArray = Array.from(competitionList);
    if (sortBy === 'date') {
      competitionItemsArray.sort(function (a, b) {
        var dateA = new Date(a.querySelector('[data-date]').getAttribute('data-date').split('.').reverse().join('-'));
        var dateB = new Date(b.querySelector('[data-date]').getAttribute('data-date').split('.').reverse().join('-'));
        return dateB.getFullYear() - dateA.getFullYear() || dateB.getMonth() - dateA.getMonth() || dateB.getDate() - dateA.getDate();
      });
    } else if (sortBy === 'popularity') {
      competitionItemsArray.sort(function (a, b) {
        var popularityA = a.getAttribute('data-popularity');
        var popularityB = b.getAttribute('data-popularity');
        return popularityB - popularityA;
      });
    }
    var competitionsContainer = document.querySelector('.competitions');
    var competitionPage = document.querySelector('.competition');
    var fragment = document.createDocumentFragment();
    if (competitionsContainer && !competitionPage) {
      competitionItemsArray.forEach(function (item) {
        fragment.appendChild(item);
      });
      competitionsContainer.innerHTML = '';
      competitionsContainer.appendChild(fragment);
    }
  }

  //при загрузке страницы изначально сортировка по популярности
  sortCompetitions('popularity');
  var sortToggle = document.querySelector('.competitions-list__sort-button');
  var sortOptions = document.querySelector('.competitions-list__sort-list');
  if (sortToggle && sortOptions) {
    sortToggle.addEventListener('click', function () {
      sortOptions.classList.toggle('active');
      sortToggle.querySelector('.arrow').classList.toggle('active');
    });
    var sortLinks = sortOptions.querySelectorAll('a');
    sortLinks.forEach(function (link) {
      link.addEventListener('click', function (event) {
        event.preventDefault();
        var sortBy = event.target.dataset.sort;
        sortCompetitions(sortBy);
        var windowWidth = window.innerWidth;
        if (windowWidth < 1440) {
          sortOptions.classList.toggle('active');
          sortToggle.querySelector('.arrow').classList.toggle('active');
        }
        sortLinks.forEach(function (l) {
          return l.classList.remove('active');
        });
        event.target.classList.add('active');
      });
    });
  }
  window.addEventListener('resize', function () {
    var windowWidth = window.innerWidth;
    if (windowWidth >= 1440 && sortOptions) {
      sortOptions.classList.remove('active');
      sortToggle.querySelector('.arrow').classList.remove('active');
    }
  });

  //registration button
  var competitionsButtons = document.querySelectorAll('.competitions__buttons');
  competitionsButtons.forEach(function (button) {
    var buttonRegistration = button.querySelector('a').getAttribute('data-button-registration');
    var priceElement = button.querySelector('p');
    if (buttonRegistration == 'over' || buttonRegistration == 'registration-completed') {
      priceElement.style.display = 'none';
    } else if (buttonRegistration == 'registration-active') {
      priceElement.style.display = 'block';
    }
  });

  //filter search
  var filterInput = document.querySelector('.filter-input');
  var filterList = document.querySelectorAll('.filter-item');
  var selectedContainer = document.querySelector('.selected-items');
  function addToSelectedContainer(text, item) {
    selectedContainer.classList.remove('visually-hidden');
    var selectedItem = document.createElement('div');
    selectedItem.classList.add('selected-item');
    selectedItem.dataset.text = text;
    var selectedItemText = document.createElement('span');
    selectedItemText.textContent = text;
    var removeBtn = document.createElement('span');
    removeBtn.classList.add('remove-btn');
    var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
    svg.setAttribute('width', '10');
    svg.setAttribute('height', '10');
    svg.setAttribute('viewBox', '0 0 10 10');
    svg.setAttribute('fill', 'none');
    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
    path.setAttribute('d', 'M1 1L9 9M9 1L1 9');
    svg.appendChild(path);
    removeBtn.appendChild(svg);
    removeBtn.addEventListener('click', function () {
      removeFromSelectedContainer(text, item, niceSelectInstance);
      item.querySelector('input').checked = false;
    });
    selectedItem.appendChild(selectedItemText);
    selectedItem.appendChild(removeBtn);
    selectedContainer.appendChild(selectedItem);
  }
  function removeFromSelectedContainer(text, item, niceSelectInstance) {
    var selectedItems = selectedContainer.querySelectorAll('.selected-item');
    selectedItems.forEach(function (selectedItem) {
      if (selectedItem.dataset.text === text) {
        selectedItem.remove();
        if (item.querySelector('input[type="checkbox"]')) {
          var checkbox = item.querySelector('input[type="checkbox"]');
          checkbox.checked = false;
        }
        if (item.querySelector('input[type="radio"]')) {
          var radio = item.querySelector('input[type="radio"]');
          radio.checked = false;
        }
        if (item.querySelector('input[type="text"]')) {
          var _text = item.querySelector('input[type="text"]');
          _text.value = '';
        }
        if (item.querySelector('#region')) {
          var region = item.querySelector('#region');
          region.selectedIndex = -1; // Сбросить выбранный option
          if (niceSelectInstance) {
            niceSelectInstance.update();
            document.querySelector('.nice-select').querySelector('.current').style.color = "";
          }
        }
        if (document.querySelectorAll('.selected-item').length === 0) {
          selectedContainer.classList.add('visually-hidden');
        } else {
          selectedContainer.classList.remove('visually-hidden');
        }
      }
    });
  }

  //filter reset
  var resetButton = document.querySelector('.selected-container button[type="reset"]');
  if (resetButton) {
    resetButton.addEventListener('click', function () {
      var forms = document.querySelectorAll('form');
      forms.forEach(function (form) {
        form.reset();
        select.value = '';
      });
      var checkboxes = document.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach(function (checkbox) {
        checkbox.checked = false;
      });
      var radioInputs = document.querySelectorAll('input[type="radio"]');
      radioInputs.forEach(function (radioInput) {
        radioInput.checked = false;
      });
      selectedContainer.classList.add('visually-hidden');
      var selectedItems = selectedContainer.querySelectorAll('.selected-item');
      selectedItems.forEach(function (i) {
        return i.remove();
      });
      filterItems();
    });
  }
  var select = document.getElementById('region');
  var niceSelectInstance;
  function setFormValues() {
    var urlParams = new URLSearchParams(window.location.search);
    urlParams.forEach(function (value, key) {
      var checkboxes = document.querySelectorAll('input[type="checkbox"][name="' + key + '"]');
      var radioButtons = document.querySelectorAll('input[type="radio"][name="' + key + '"]');
      checkboxes.forEach(function (checkbox) {
        if (checkbox.value === value) {
          checkbox.checked = true;
          addToSelectedContainer(checkbox.parentNode.textContent.trim(), checkbox.parentNode);
        }
      });
      radioButtons.forEach(function (radioButton) {
        if (radioButton.value === value) {
          radioButton.checked = true;
          addToSelectedContainer(radioButton.parentNode.textContent.trim(), radioButton.parentNode);
        }
      });
    });
    var inputDate = document.querySelector('input[name="input-date"]');
    var dateValue = urlParams.get('input-date');
    if (inputDate && dateValue) {
      inputDate.value = dateValue;
      addToSelectedContainer('Дата: ' + dateValue, inputDate.parentNode);
    }
    var selectRegion = document.querySelector('select[name="region"]');
    var regionValue = urlParams.get('region');
    if (select) {
      niceSelectInstance = new _niceSelect.default(select, {
        searchable: true,
        placeholder: 'Регион/область',
        searchText: 'Начните поиск'
      });
      if (selectRegion && regionValue) {
        selectRegion.value = regionValue;
        niceSelectInstance.update();
        document.querySelector('.nice-select').querySelector('.current').style.color = "#2E2E2E";
        addToSelectedContainer(selectRegion.options[selectRegion.selectedIndex].text, selectRegion.parentNode);
      } else {
        selectRegion.value = '';
        niceSelectInstance.update();
        document.querySelector('.nice-select').querySelector('.current').style.color = "";
      }
      select.addEventListener('change', function () {
        if (select.value !== "") {
          document.querySelector('.nice-select').querySelector('.current').style.color = "#2E2E2E";
          addToSelectedContainer(selectRegion.options[selectRegion.selectedIndex].text, selectRegion.parentNode);
        } else {
          document.querySelector('.nice-select').querySelector('.current').style.color = "";
          removeFromSelectedContainer(selectRegion.options[selectRegion.selectedIndex].text, selectRegion.parentNode);
        }
      });
    }
    filterList.forEach(function (item) {
      var checkbox = item.querySelector('input');
      checkbox.addEventListener('change', function () {
        var text = item.textContent.trim();
        if (checkbox.checked) {
          addToSelectedContainer(text, item);
        } else {
          removeFromSelectedContainer(text, item);
        }
      });
    });
  }
  window.addEventListener('load', setFormValues);

  //filter item accordion
  setTimeout((0, _initAccordion.initAccordions)(), 1000);

  //фильтрация каталога
  var competitionItems = document.querySelectorAll('.competitions__item');
  var dateInput = document.querySelector('input[name="input-date"]');
  var pagination = document.querySelector('.pagination');
  function filterItems() {
    var seriesFilter = Array.from(document.querySelector('#filter-series').querySelectorAll('input:checked')).map(function (el) {
      return el.value;
    });
    var distanceFilter = Array.from(document.querySelector('#filter-distance').querySelectorAll('input:checked')).map(function (el) {
      return el.value;
    });
    var categoryFilter = Array.from(document.querySelector('#filter-category').querySelectorAll('input:checked')).map(function (el) {
      return el.value;
    });
    var inputDateFilter = dateInput.value;
    var customSelectInput = Array.from(document.querySelector('#filter-place').querySelectorAll('option:checked')).map(function (el) {
      return el.value;
    });
    var selectedDateRanges = Array.from(document.querySelector('input[name="date"]')).map(function (input) {
      return input.value;
    });
    var visibleItems = 0;
    competitionItems.forEach(function (item) {
      item.classList.remove('hidden');
      var series = item.dataset.series;
      var distances = Array.from(item.querySelectorAll('[data-distance]')).map(function (el) {
        return el.dataset.distance;
      });
      var category = item.querySelector('[data-category]').dataset.category;
      var region = item.querySelector('[data-region]').dataset.region;
      var itemDate = new Date(item.querySelector('[data-date]').dataset.date.split('.').reverse().join('-'));
      var matchesSeries = seriesFilter.length === 0 || seriesFilter.includes(series);
      var matchesDistance = distanceFilter.length === 0 || distanceFilter.some(function (filter) {
        return distances.includes(filter);
      });
      var matchesCategory = categoryFilter.length === 0 || categoryFilter.includes(category);
      var matchesRegion = customSelectInput.length === 0 || customSelectInput.value === region;
      var matchesDate = inputDateFilter.length === 10 ? itemDate.toLocaleDateString('ru-RU') === inputDateFilter : selectedDateRanges.length === 0 || selectedDateRanges.some(function (range) {
        return isDateInRange(itemDate, range, 0);
      });
      if (inputDateFilter.length === 21) {
        var _inputDateFilter$spli = inputDateFilter.split("-"),
          _inputDateFilter$spli2 = _slicedToArray(_inputDateFilter$spli, 2),
          startDate = _inputDateFilter$spli2[0],
          endDate = _inputDateFilter$spli2[1];
        var firstDay = new Date(startDate.split('.').reverse().join('-'));
        var start = new Date(startDate.replace(/(\d{2})\.(\d{2})\.(\d{4})/, "$3-$2-$1"));
        var end = new Date(endDate.replace(/(\d{2})\.(\d{2})\.(\d{4})/, "$3-$2-$1"));
        var diffInMs = end.getTime() - start.getTime();
        var range = Math.ceil(diffInMs / (1000 * 60 * 60 * 24));
        matchesDate = isDateInRange(itemDate, range, firstDay);
      }
      if (matchesSeries && matchesDistance && matchesCategory && matchesDate && matchesRegion) {
        item.classList.remove('hidden');
        visibleItems++;
      } else {
        item.classList.add('hidden');
      }
    });
    if (visibleItems === 0) {
      pagination.classList.add('visually-hidden');
      document.querySelector('.list-container__nothing').classList.remove('visually-hidden');
    } else {
      pagination.classList.remove('visually-hidden');
      document.querySelector('.list-container__nothing').classList.add('visually-hidden');
    }
  }
  function isDateInRange(date, range, firstDay) {
    var rangeStr = range.toString();
    var today = new Date();
    var daysToAdd = parseInt(rangeStr, 10);
    var endDate;
    if (firstDay === 0) {
      endDate = new Date(today.getTime() + daysToAdd * 24 * 60 * 60 * 1000);
      return date >= today && date <= endDate;
    } else {
      endDate = new Date(firstDay.getTime() + daysToAdd * 24 * 60 * 60 * 1000);
      return date >= firstDay && date <= endDate;
    }
  }

  //подсказки при воде названия в фильтре
  var suggestionList = document.getElementById('suggestion-list');
  var competitionTitles = Array.from(document.querySelectorAll('.competitions__title')).map(function (title) {
    return title.textContent.toLowerCase();
  });
  if (filterInput) {
    filterInput.addEventListener('input', function () {
      var filterText = this.value.toLowerCase();
      suggestionList.innerHTML = '';
      var matchingTitles = competitionTitles.filter(function (title) {
        return title.includes(filterText);
      });
      if (matchingTitles.length > 0) {
        matchingTitles.forEach(function (title) {
          var suggestionItem = document.createElement('div');
          suggestionItem.classList.add('suggestion-item');
          suggestionItem.textContent = title;
          suggestionItem.addEventListener('click', function () {
            filterInput.value = title;
            suggestionList.style.display = 'none';
            filterCompetitions(title.toLowerCase());
          });
          suggestionList.appendChild(suggestionItem);
        });
        suggestionList.style.display = 'block';
      } else {
        suggestionList.style.display = 'none';
      }
      filterCompetitions(filterText);
    });
  }
  function filterCompetitions(filterText) {
    competitionItems.forEach(function (item) {
      var title = item.querySelector('.competitions__title').textContent.toLowerCase();
      if (title.includes(filterText)) {
        item.classList.remove('hidden');
      } else {
        item.classList.add('hidden');
      }
    });
  }

  //календарь
  var dateInputs = document.querySelectorAll('.date-input');
  dateInputs.forEach(function (dateInput) {
    var input = dateInput.querySelector('input[name="input-date"]');
    var button = dateInput.querySelector('.date-input__btn');
    var calendar = dateInput.querySelector('.date-picker__calendar');
    var prevMonthButton = dateInput.querySelector('.date-picker__prev-month');
    var nextMonthButton = dateInput.querySelector('.date-picker__next-month');
    var daysContainer = dateInput.querySelector('.date-picker__days');
    var currentDate = new Date();
    var startDate = null;
    var endDate = null;
    function formatDate(date) {
      return "".concat(date.getDate().toString().padStart(2, '0'), ".").concat((date.getMonth() + 1).toString().padStart(2, '0'), ".").concat(date.getFullYear());
    }
    function renderCalendar() {
      var currentMonth = currentDate.getMonth();
      var currentYear = currentDate.getFullYear();
      var firstDayOfMonth = new Date(currentYear, currentMonth, 1).getDay() || 7; // Если воскресенье, считаем как 7
      var daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
      var monthNames = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'];
      daysContainer.innerHTML = '';

      // Добавляем пустые дни в начале
      for (var i = 1; i < firstDayOfMonth; i++) {
        var day = document.createElement('div');
        day.classList.add('date-picker__day', 'date-picker__day--empty');
        daysContainer.appendChild(day);
      }

      // Заполняем дни месяца
      var _loop = function _loop(_i) {
        var day = document.createElement('div');
        day.classList.add('date-picker__day');
        day.textContent = _i;
        day.addEventListener('click', function () {
          selectDate(new Date(currentYear, currentMonth, _i));
        });
        day.addEventListener('mouseover', function () {
          if (startDate && !endDate) {
            var _dayDate = new Date(currentYear, currentMonth, _i);
            if (_dayDate >= startDate || _dayDate <= startDate) {
              day.classList.add('is-hovered');
              var _daysContainer = dateInput.querySelector('.date-picker__days');
              var days = _daysContainer.querySelectorAll('.date-picker__day');
              days.forEach(function (dayElement) {
                var elementDate = new Date(currentYear, currentMonth, parseInt(dayElement.textContent));
                if (elementDate >= startDate && elementDate <= _dayDate || elementDate <= startDate && elementDate >= _dayDate) {
                  dayElement.classList.add('is-in-range');
                }
              });
            }
          }
        });
        day.addEventListener('mouseout', function () {
          if (startDate && !endDate) {
            day.classList.remove('is-hovered');
            var _daysContainer2 = dateInput.querySelector('.date-picker__days');
            var days = _daysContainer2.querySelectorAll('.date-picker__day');
            days.forEach(function (dayElement) {
              dayElement.classList.remove('is-in-range');
            });
          }
        });
        var dayDate = new Date(currentYear, currentMonth, _i);
        if (startDate && endDate) {
          if (dayDate >= startDate && dayDate <= endDate || dayDate <= startDate && dayDate >= endDate) {
            day.classList.add('is-in-range');
          }
          if (dayDate.getDate() === startDate.getDate() && dayDate.getMonth() === startDate.getMonth() && dayDate.getFullYear() === startDate.getFullYear()) {
            day.classList.add('is-start-date');
          }
          if (dayDate.getDate() === endDate.getDate() && dayDate.getMonth() === endDate.getMonth() && dayDate.getFullYear() === endDate.getFullYear()) {
            day.classList.add('is-end-date');
          }
        } else if (startDate) {
          if (dayDate.getDate() === startDate.getDate() && dayDate.getMonth() === startDate.getMonth() && dayDate.getFullYear() === startDate.getFullYear()) {
            day.classList.add('is-start-date');
          }
        }
        daysContainer.appendChild(day);
      };
      for (var _i = 1; _i <= daysInMonth; _i++) {
        _loop(_i);
      }
      dateInput.querySelector('.date-picker__current-month').textContent = "".concat(monthNames[currentMonth], " ").concat(currentYear);
    }
    function selectDate(date) {
      if (!startDate) {
        startDate = date;
        input.value = formatDate(startDate);
        renderCalendar();
      } else if (!endDate) {
        endDate = date;
        if (endDate < startDate) {
          var _ref = [endDate, startDate];
          startDate = _ref[0];
          endDate = _ref[1];
        }
        input.value = "".concat(formatDate(startDate), "-").concat(formatDate(endDate));
        calendar.style.display = 'none';
        renderCalendar();
      } else {
        startDate = date;
        endDate = null;
        input.value = formatDate(startDate);
        renderCalendar();
      }
    }
    button.addEventListener('click', function () {
      if (calendar.style.display === 'block') {
        calendar.style.display = 'none';
      } else {
        calendar.style.display = 'block';
      }
    });
    input.addEventListener('click', function () {
      if (calendar.style.display === 'block') {
        calendar.style.display = 'none';
      } else {
        calendar.style.display = 'block';
      }
    });
    document.addEventListener('click', function (event) {
      if (!dateInput.contains(event.target) && !event.target.classList.contains('date-picker__day')) {
        calendar.style.display = 'none';
      }
    });
    prevMonthButton.addEventListener('click', function () {
      currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1);
      renderCalendar();
    });
    nextMonthButton.addEventListener('click', function () {
      currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1);
      renderCalendar();
    });
    renderCalendar();
  });

  //клик на построннюю область
  document.addEventListener('click', function (event) {
    if (suggestionList) {
      if (!event.target.closest('.filter-container')) {
        suggestionList.style.display = 'none';
      }
      if (!event.target.closest('.competitions-list__sort-list') && !event.target.closest('.competitions-list__sort-button')) {
        document.querySelector('.competitions-list__sort-list').classList.remove('active');
        document.querySelector('.competitions-list__sort-button .arrow').classList.remove('active');
      }
      if (!event.target.closest('.menu') && !event.target.closest('header')) {
        document.querySelector('.menu').classList.remove('show');
        document.querySelector('body').classList.remove('dark');
        document.querySelector('.burger').classList.remove('active');
      }
    }
  });

  // Получаем элемент information-modal
  var informationModal = document.querySelector('.information-modal');
  var isModalVisible = true;
  var prevScrollPos = window.pageYOffset;
  var hiddenModalTop = 0;
  if (informationModal) {
    window.addEventListener('scroll', openInformationModal);
    window.addEventListener('load', openInformationModal);
    window.addEventListener('resize', openInformationModal);
  }
  function openInformationModal() {
    var modalHeight = informationModal.offsetHeight;
    var modalTop = informationModal.getBoundingClientRect().top;
    var modalTopStart = informationModal.getBoundingClientRect().top;
    var windowWidth = window.innerWidth;
    var currentScrollPos = window.pageYOffset;
    var windowHeight = window.innerHeight;
    if (informationModal) {
      if (modalTop + modalHeight < windowHeight) {
        informationModal.classList.add('none');
        isModalVisible = false;
      }
      if (windowWidth < 768) {
        if (currentScrollPos > prevScrollPos && modalTop + modalHeight <= windowHeight) {
          hiddenModalTop = modalTop;
          informationModal.classList.add('none');
          isModalVisible = false;
        } else if (currentScrollPos <= modalTopStart) {
          informationModal.classList.remove('none');
          isModalVisible = true;
        }
        prevScrollPos = currentScrollPos;
        modalTop = informationModal.getBoundingClientRect().top;
      } else {
        informationModal.classList.remove('none');
        isModalVisible = true;
      }
    }
  }
  window.addEventListener('resize', closeModal);
  function closeModal() {
    var windowWidth = window.innerWidth;
    if (windowWidth >= 768 && document.querySelector('.information-modal')) {
      document.querySelector('.information-modal').classList.remove('mobile-modal');
      document.querySelector('body').classList.remove('dark-modal');
    }
  }
  var moreButton = document.querySelector('.information-modal__more');
  if (moreButton) {
    moreButton.addEventListener('click', function () {
      document.querySelector('.information-modal').classList.add('mobile-modal');
      document.querySelector('body').classList.add('dark-modal');
    });
  }
  var closeModalButton = document.querySelector('.information-modal__close');
  if (closeModalButton) {
    closeModalButton.addEventListener('click', function () {
      document.querySelector('.information-modal').classList.remove('mobile-modal');
      document.querySelector('body').classList.remove('dark-modal');
    });
  }
  var disabledSlot = document.querySelector('[data-state="disabled"]');
  if (disabledSlot) {
    disabledSlot.parentElement.style.backgroundColor = "#f3f4f6";
  }
  var buttonLike = document.querySelector('[data-button="add-like"]');
  if (buttonLike) {
    buttonLike.addEventListener('click', function (event) {
      event.preventDefault();
      if (buttonLike.parentElement.parentElement.getAttribute('data-like') === 'true') {
        buttonLike.parentElement.parentElement.setAttribute('data-like', 'false');
      } else {
        buttonLike.parentElement.parentElement.setAttribute('data-like', 'true');
      }
    });
  }

  //lazy load
  function addLazyLoadingToImages() {
    var images = document.querySelectorAll('img');
    if (images) {
      images.forEach(function (img) {
        img.setAttribute('loading', 'lazy');
      });
    }
    var sources = document.querySelectorAll('source');
    if (sources) {
      sources.forEach(function (source) {
        source.setAttribute('loading', 'lazy');
      });
    }
    var iframes = document.querySelectorAll('source');
    if (iframes) {
      iframes.forEach(function (iframe) {
        iframe.setAttribute('loading', 'lazy');
      });
    }
  }
  window.addEventListener('load', addLazyLoadingToImages);

  //авторизация
  var switchLogin = document.querySelector('.authorization__switch');
  var authorizationLogin = document.querySelector('.authorization__login');
  var authorizationRegistration = document.querySelector('.authorization__registration');
  function switchSection(section) {
    if (switchLogin) {
      if (section === 'login') {
        authorizationLogin.classList.remove('visually-hidden');
        authorizationRegistration.classList.add('visually-hidden');
        switchLogin.querySelector('button[data-button="login"]').classList.add('active');
        switchLogin.querySelector('button[data-button="registration"]').classList.remove('active');
      } else {
        authorizationLogin.classList.add('visually-hidden');
        authorizationRegistration.classList.remove('visually-hidden');
        switchLogin.querySelector('button[data-button="registration"]').classList.add('active');
        switchLogin.querySelector('button[data-button="login"]').classList.remove('active');
      }
    }
  }
  window.addEventListener('hashchange', function () {
    var hash = window.location.hash.slice(1);
    switchSection(hash);
  });
  var hash = window.location.hash.slice(1) || 'login';
  switchSection(hash);
  if (switchLogin) {
    switchLogin.querySelectorAll('button').forEach(function (buttonSwitch) {
      buttonSwitch.addEventListener('click', function () {
        var dataButton = this.getAttribute('data-button');
        window.location.hash = dataButton;
      });
    });
  }

  //валидация
  var forms = document.querySelectorAll('.user-form');
  var EMAIL_REGEXP = /^(?:(?![\t-\r @\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])+@(?:(?![\t-\r @\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])+\.(?:(?![\t-\r @\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])+$/i;
  function validateField(field) {
    var label = field.closest('label');
    var errorMessage = label.querySelector('.error-message');
    if (errorMessage) {
      if (['user-name', 'user-surname'].includes(field.name)) {
        var newValue = field.value.replace(/\d/g, '');
        if (newValue !== field.value) {
          field.value = newValue;
        }
      }
      if (field.name === 'user-email' && !EMAIL_REGEXP.test(field.value)) {
        errorMessage.classList.remove('visually-hidden');
        field.classList.add('error');
        return false;
      } else {
        errorMessage.classList.add('visually-hidden');
        field.classList.remove('error');
      }
      if (field.name === 'user-password-repeat') {
        var passwordField = field.closest('form').querySelector('input[name="user-password"]');
        if (passwordField && field.value !== passwordField.value) {
          errorMessage.classList.remove('visually-hidden');
          field.classList.add('error');
          return false;
        } else {
          errorMessage.classList.add('visually-hidden');
          field.classList.remove('error');
        }
      }
      if (field.parentElement.querySelector('.necessary')) {
        if (field.value == '') {
          errorMessage.classList.remove('visually-hidden');
          field.classList.add('error');
          return false;
        } else {
          errorMessage.classList.add('visually-hidden');
          field.classList.remove('error');
        }
      }

      // console.log(form);
      // form.querySelectorAll('.necessary').forEach((label) => {
      //   const field = label.parentElement.parentElement.querySelector('input');
      //   if (field.value.trim() === '') {
      //     areAllNecessaryFieldsFilled = false;
      //   }
      // });
    }
    return true;
  }
  forms.forEach(function (form) {
    var submitButton = form.querySelector('button[type="submit"]');
    submitButton.classList.add('disabled');
    form.querySelectorAll('input').forEach(function (field) {
      field.addEventListener('input', function () {
        var isFieldValid = validateField(field);
        var errorMessage = field.closest('label').querySelector('.error-message');
        if (errorMessage) {
          if (isFieldValid) {
            errorMessage.classList.add('visually-hidden');
            field.classList.remove('error');
          } else {
            errorMessage.classList.remove('visually-hidden');
            field.classList.add('error');
          }
        }
        var areAllNecessaryFieldsFilled = true;
        form.querySelectorAll('.necessary').forEach(function (label) {
          var field = label.parentElement.parentElement.querySelector('input');
          if (field.value.trim() === '') {
            areAllNecessaryFieldsFilled = false;
          }
        });
        var areAllErrorMessagesHidden = true;
        form.querySelectorAll('.error-message').forEach(function (message) {
          if (!message.classList.contains('visually-hidden')) {
            areAllErrorMessagesHidden = false;
          }
        });
        var checkbox = form.querySelector('input[type="checkbox"]');
        if (checkbox) {
          if (areAllNecessaryFieldsFilled && areAllErrorMessagesHidden && checkbox.checked) {
            submitButton.classList.remove('disabled');
            submitButton.classList.add('active');
          } else {
            submitButton.classList.remove('active');
            submitButton.classList.add('disabled');
          }
        } else {
          if (areAllNecessaryFieldsFilled && areAllErrorMessagesHidden) {
            submitButton.classList.remove('disabled');
            submitButton.classList.add('active');
          } else {
            submitButton.classList.remove('active');
            submitButton.classList.add('disabled');
          }
        }
      });
    });
    form.addEventListener('submit', function (event) {
      event.preventDefault();
      if (!submitButton.classList.contains('disabled')) {
        var isFormValid = true;
        form.querySelectorAll('input').forEach(function (field) {
          if (!validateField(field)) {
            isFormValid = false;
          }
        });
        if (isFormValid) {
          form.submit();
        } else {
          form.querySelectorAll('.error-message').forEach(function (message) {
            message.classList.remove('visually-hidden');
          });
        }
      }
    });
  });
});

},{"./../js/vendor/nice-select2":6,"./modules/accordion/init-accordion":3,"./utils/ios-vh-fix":5}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Accordions = void 0;
function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function"); }
function _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }
function _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
var Accordions = exports.Accordions = /*#__PURE__*/function () {
  function Accordions() {
    _classCallCheck(this, Accordions);
    this._openHeight = 0;
    this._windowWidth = window.innerWidth;
    this._documentClickHandler = this._documentClickHandler.bind(this);
    this._windowResizeHandler = this._windowResizeHandler.bind(this);
    this._init();
  }
  return _createClass(Accordions, [{
    key: "_init",
    value: function _init() {
      this.fullUpdate();
      document.addEventListener('click', this._documentClickHandler);
      window.addEventListener('resize', this._windowResizeHandler);
    }
  }, {
    key: "_documentClickHandler",
    value: function _documentClickHandler(evt) {
      var target = evt.target;
      if (!target.closest('[data-accordion="button"]')) {
        return;
      }
      evt.preventDefault();
      var parent = target.closest('[data-accordion="parent"]');
      if (parent.dataset.destroy && !window.matchMedia(parent.dataset.destroy).matches) {
        return;
      }
      var element = target.closest('[data-accordion="element"]');
      if (element.classList.contains('is-active')) {
        this.closeAccordion(element);
        return;
      }
      this.openAccordion(element);
    }
  }, {
    key: "_windowResizeHandler",
    value: function _windowResizeHandler() {
      if (this._windowWidth === window.innerWidth) {
        return;
      }
      this._windowWidth = window.innerWidth;
      this.updateAccordionsHeight();
    }
  }, {
    key: "closeAllAccordion",
    value: function closeAllAccordion(parent) {
      var _this = this;
      var elements = parent.querySelectorAll('[data-accordion="element"]');
      elements.forEach(function (element) {
        var currentParent = element.closest('[data-accordion="parent"]');
        if (currentParent === parent) {
          _this.closeAccordion(element);
        }
      });
    }
  }, {
    key: "updateAccordionsHeight",
    value: function updateAccordionsHeight() {
      var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      if (element) {
        var content = element.querySelector('[data-accordion="content"]');
        content.style.transition = 'none';
        content.style.maxHeight = "".concat(content.scrollHeight + 5, "px");
        setTimeout(function () {
          content.style.transition = null;
        });
        return;
      }
      var closeElements = document.querySelectorAll('[data-accordion="element"]:not(.is-active)');
      closeElements.forEach(function (closeElement) {
        var parent = closeElement.closest('[data-accordion="parent"]');
        var content = closeElement.querySelector('[data-accordion="content"]');
        if (parent.dataset.destroy && !window.matchMedia(parent.dataset.destroy).matches) {
          content.style.maxHeight = '100%';
          return;
        }
        content.style.maxHeight = null;
      });
      var openElements = document.querySelectorAll('[data-accordion="element"].is-active');
      openElements.forEach(function (openElement) {
        var content = openElement.querySelector('[data-accordion="content"]');
        var parent = openElement.closest('[data-accordion="parent"]');
        if (parent.dataset.destroy && !window.matchMedia(parent.dataset.destroy).matches) {
          content.style.maxHeight = '100%';
          return;
        }
        content.style.transition = 'none';
        content.style.maxHeight = "".concat(content.scrollHeight + 5, "px");
        setTimeout(function () {
          content.style.transition = null;
        });
      });
    }
  }, {
    key: "fullUpdate",
    value: function fullUpdate() {
      var _this2 = this;
      var parent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      var transition = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var openElements;
      if (parent) {
        openElements = parent.querySelectorAll('[data-accordion="element"].is-active');
      } else {
        openElements = document.querySelectorAll('[data-accordion="element"].is-active');
      }
      openElements.forEach(function (openElement) {
        var innerParent = openElement.querySelector('[data-accordion="parent"]');
        if (innerParent) {
          return;
        }
        _this2.openAccordion(openElement, transition);
      });
      this.updateAccordionsHeight();
    }
  }, {
    key: "openAccordion",
    value: function openAccordion(element) {
      var transition = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var parentElement = element.closest('[data-accordion="parent"]');
      var contentElement = element.querySelector('[data-accordion="content"]');
      this._openHeight += contentElement.scrollHeight;
      if (parentElement.hasAttribute('data-single')) {
        this.closeAllAccordion(parentElement);
      }
      element.classList.add('is-active');
      if (transition) {
        contentElement.style.maxHeight = "".concat(this._openHeight + 5, "px");
      } else {
        contentElement.style.transition = 'none';
        contentElement.style.maxHeight = "".concat(this._openHeight + 5, "px");
        setTimeout(function () {
          contentElement.style.transition = null;
        });
      }
      if (parentElement.closest('[data-accordion="element"]')) {
        this.openAccordion(parentElement.closest('[data-accordion="element"]'), transition);
        return;
      }
      this._openHeight = 0;
    }
  }, {
    key: "closeAccordion",
    value: function closeAccordion(element) {
      var transition = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var contentElement = element.querySelector('[data-accordion="content"]');
      if (!contentElement) {
        return;
      }
      element.classList.remove('is-active');
      if (transition) {
        contentElement.style.maxHeight = '0';
      } else {
        contentElement.style.transition = 'none';
        contentElement.style.maxHeight = '0';
        setTimeout(function () {
          contentElement.style.transition = null;
        });
      }
    }
  }]);
}();

},{}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initAccordions = exports.accordions = void 0;
var _accordions = require("./accordions");
var accordions;
var initAccordions = exports.initAccordions = function initAccordions() {
  exports.accordions = accordions = new _accordions.Accordions();
  // Используйте в разработке экспортируемую переменную accordions, window сделан для бэкэнда
  window.accordions = accordions;
};

},{"./accordions":2}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.iosChecker = void 0;
var iosChecker = exports.iosChecker = function iosChecker() {
  return ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(navigator.platform)
  // iPad on iOS 13 detection
  || navigator.userAgent.includes('Mac') && 'ontouchend' in document;
};

},{}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.iosVhFix = void 0;
var _iosChecker = require("./ios-checker");
var iosVhFix = exports.iosVhFix = function iosVhFix() {
  if (!(!!window.MSInputMethodContext && !!document.documentMode)) {
    if ((0, _iosChecker.iosChecker)()) {
      var vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', "".concat(vh, "px"));
      window.addEventListener('resize', function () {
        vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', "".concat(vh, "px"));
      });
    }
  }
};

},{"./ios-checker":4}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.bind = bind;
exports.default = NiceSelect;
// utility functions
function triggerClick(el) {
  var event = document.createEvent("MouseEvents");
  event.initEvent("click", true, false);
  el.dispatchEvent(event);
}
function triggerChange(el) {
  var event = document.createEvent("HTMLEvents");
  event.initEvent("change", true, false);
  el.dispatchEvent(event);
}
function triggerFocusIn(el) {
  var event = document.createEvent("FocusEvent");
  event.initEvent("focusin", true, false);
  el.dispatchEvent(event);
}
function triggerFocusOut(el) {
  var event = document.createEvent("FocusEvent");
  event.initEvent("focusout", true, false);
  el.dispatchEvent(event);
}
function triggerModalOpen(el) {
  var event = document.createEvent("UIEvent");
  event.initEvent("modalopen", true, false);
  el.dispatchEvent(event);
}
function triggerModalClose(el) {
  var event = document.createEvent("UIEvent");
  event.initEvent("modalclose", true, false);
  el.dispatchEvent(event);
}
function triggerValidationMessage(el, type) {
  if (type == 'invalid') {
    addClass(this.dropdown, 'invalid');
    removeClass(this.dropdown, 'valid');
  } else {
    addClass(this.dropdown, 'valid');
    removeClass(this.dropdown, 'invalid');
  }
}
function attr(el, key) {
  if (el[key] != undefined) {
    return el[key];
  }
  return el.getAttribute(key);
}
function data(el, key) {
  return el.getAttribute("data-" + key);
}
function hasClass(el, className) {
  if (el) {
    return el.classList.contains(className);
  } else {
    return false;
  }
}
function addClass(el, className) {
  if (el) return el.classList.add(className);
}
function removeClass(el, className) {
  if (el) return el.classList.remove(className);
}
var defaultOptions = {
  data: null,
  searchable: true,
  showSelectedItems: false
};
function NiceSelect(element, options) {
  this.el = element;
  this.config = Object.assign({}, defaultOptions, options || {});
  this.data = this.config.data;
  this.selectedOptions = [];
  this.placeholder = attr(this.el, "placeholder") || this.config.placeholder || "Регион/область";
  this.searchtext = attr(this.el, "searchtext") || this.config.searchtext || "Начните поиск";
  this.selectedtext = attr(this.el, "selectedtext") || this.config.selectedtext || "selected";
  this.dropdown = null;
  this.multiple = attr(this.el, "multiple");
  this.disabled = attr(this.el, "disabled");
  this.create();
}
NiceSelect.prototype.create = function () {
  this.el.style.opacity = "0";
  this.el.style.width = "0";
  this.el.style.padding = "0";
  this.el.style.height = "0";
  if (this.data) {
    this.processData(this.data);
  } else {
    this.extractData();
  }
  this.renderDropdown();
  this.bindEvent();
};
NiceSelect.prototype.processData = function (data) {
  var options = [];
  data.forEach(function (item) {
    options.push({
      data: item,
      attributes: {
        selected: !!item.selected,
        disabled: !!item.disabled,
        optgroup: item.value == 'optgroup'
      }
    });
  });
  this.options = options;
};
NiceSelect.prototype.extractData = function () {
  var _this = this;
  var options = this.el.querySelectorAll("option,optgroup");
  var data = [];
  var allOptions = [];
  var selectedOptions = [];
  options.forEach(function (item) {
    if (item.tagName == 'OPTGROUP') {
      var itemData = {
        text: item.label,
        value: 'optgroup'
      };
    } else {
      var itemData = {
        text: item.innerText,
        value: item.value,
        selected: item.getAttribute("selected") != null || _this.el.value == item.value,
        disabled: item.getAttribute("disabled") != null
      };
    }
    var attributes = {
      selected: item.selected,
      disabled: item.disabled,
      optgroup: item.tagName == 'OPTGROUP'
    };
    data.push(itemData);
    allOptions.push({
      data: itemData,
      attributes: attributes
    });
  });
  this.data = data;
  this.options = allOptions;
  this.options.forEach(function (item) {
    if (item.attributes.selected) {
      selectedOptions.push(item);
    }
  });
  this.selectedOptions = selectedOptions;
};
NiceSelect.prototype.renderDropdown = function () {
  var classes = ["nice-select", attr(this.el, "class") || "", this.disabled ? "disabled" : "", this.multiple ? "has-multiple" : ""];
  var searchHtml = "<div class=\"nice-select-search-box\">";
  searchHtml += "<input type=\"text\" class=\"nice-select-search\" placeholder=\"".concat(this.searchtext, "...\" title=\"search\"/>");
  searchHtml += "</div>";
  var html = "<div class=\"".concat(classes.join(" "), "\" tabindex=\"").concat(this.disabled ? null : 0, "\">");
  html += "<span class=\"".concat(this.multiple ? "multiple-options" : "current", "\"></span>");
  html += "<div class=\"nice-select-dropdown\">";
  html += "".concat(this.config.searchable ? searchHtml : "");
  html += "<ul class=\"list\"></ul>";
  html += "</div>";
  html += "</div>";
  this.el.insertAdjacentHTML("afterend", html);
  this.dropdown = this.el.nextElementSibling;
  this._renderSelectedItems();
  this._renderItems();
};
NiceSelect.prototype._renderSelectedItems = function () {
  if (this.multiple) {
    var selectedHtml = "";
    if (this.config.showSelectedItems || this.config.showSelectedItems || window.getComputedStyle(this.dropdown).width == 'auto' || this.selectedOptions.length < 2) {
      this.selectedOptions.forEach(function (item) {
        selectedHtml += "<span class=\"current\">".concat(item.data.text, "</span>");
      });
      selectedHtml = selectedHtml == "" ? this.placeholder : selectedHtml;
    } else {
      selectedHtml = this.selectedOptions.length + ' ' + this.selectedtext;
    }
    this.dropdown.querySelector(".multiple-options").innerHTML = selectedHtml;
  } else {
    var html = this.selectedOptions.length > 0 ? this.selectedOptions[0].data.text : this.placeholder;
    this.dropdown.querySelector(".current").innerHTML = html;
  }
};
NiceSelect.prototype._renderItems = function () {
  var _this2 = this;
  var ul = this.dropdown.querySelector("ul");
  this.options.forEach(function (item) {
    ul.appendChild(_this2._renderItem(item));
  });
};
NiceSelect.prototype._renderItem = function (option) {
  var el = document.createElement("li");
  el.innerHTML = option.data.text;
  if (option.attributes.optgroup) {
    addClass(el, 'optgroup');
  } else {
    var _el$classList;
    el.setAttribute("data-value", option.data.value);
    var classList = ["option", option.attributes.selected ? "selected" : null, option.attributes.disabled ? "disabled" : null];
    el.addEventListener("click", this._onItemClicked.bind(this, option));
    (_el$classList = el.classList).add.apply(_el$classList, classList);
  }
  option.element = el;
  return el;
};
NiceSelect.prototype.update = function () {
  this.extractData();
  if (this.dropdown) {
    var open = hasClass(this.dropdown, "open");
    this.dropdown.parentNode.removeChild(this.dropdown);
    this.create();
    if (open) {
      triggerClick(this.dropdown);
    }
  }
  if (attr(this.el, "disabled")) {
    this.disable();
  } else {
    this.enable();
  }
};
NiceSelect.prototype.disable = function () {
  if (!this.disabled) {
    this.disabled = true;
    addClass(this.dropdown, "disabled");
  }
};
NiceSelect.prototype.enable = function () {
  if (this.disabled) {
    this.disabled = false;
    removeClass(this.dropdown, "disabled");
  }
};
NiceSelect.prototype.clear = function () {
  this.resetSelectValue();
  this.selectedOptions = [];
  this._renderSelectedItems();
  this.update();
  triggerChange(this.el);
};
NiceSelect.prototype.destroy = function () {
  if (this.dropdown) {
    this.dropdown.parentNode.removeChild(this.dropdown);
    this.el.style.display = "";
  }
};
NiceSelect.prototype.bindEvent = function () {
  var $this = this;
  this.dropdown.addEventListener("click", this._onClicked.bind(this));
  this.dropdown.addEventListener("keydown", this._onKeyPressed.bind(this));
  this.dropdown.addEventListener("focusin", triggerFocusIn.bind(this, this.el));
  this.dropdown.addEventListener("focusout", triggerFocusOut.bind(this, this.el));
  this.el.addEventListener("invalid", triggerValidationMessage.bind(this, this.el, 'invalid'));
  window.addEventListener("click", this._onClickedOutside.bind(this));
  if (this.config.searchable) {
    this._bindSearchEvent();
  }
};
NiceSelect.prototype._bindSearchEvent = function () {
  var searchBox = this.dropdown.querySelector(".nice-select-search");
  if (searchBox) {
    searchBox.addEventListener("click", function (e) {
      e.stopPropagation();
      return false;
    });
  }
  searchBox.addEventListener("input", this._onSearchChanged.bind(this));
};
NiceSelect.prototype._onClicked = function (e) {
  e.preventDefault();
  if (!hasClass(this.dropdown, "open")) {
    addClass(this.dropdown, "open");
    triggerModalOpen(this.el);
  } else if (!this.multiple) {
    removeClass(this.dropdown, "open");
    triggerModalClose(this.el);
  }
  if (hasClass(this.dropdown, "open")) {
    var search = this.dropdown.querySelector(".nice-select-search");
    if (search) {
      search.value = "";
      search.focus();
    }
    var t = this.dropdown.querySelector(".focus");
    removeClass(t, "focus");
    t = this.dropdown.querySelector(".selected");
    addClass(t, "focus");
    this.dropdown.querySelectorAll("ul li").forEach(function (item) {
      item.style.display = "";
    });
  } else {
    this.dropdown.focus();
  }
};
NiceSelect.prototype._onItemClicked = function (option, e) {
  var optionEl = e.target;
  if (!hasClass(optionEl, "disabled")) {
    if (this.multiple) {
      if (hasClass(optionEl, "selected")) {
        removeClass(optionEl, "selected");
        this.selectedOptions.splice(this.selectedOptions.indexOf(option), 1);
        this.el.querySelector("option[value=\"".concat(optionEl.dataset.value, "\"]")).removeAttribute('selected');
      } else {
        addClass(optionEl, "selected");
        this.selectedOptions.push(option);
      }
    } else {
      this.selectedOptions.forEach(function (item) {
        removeClass(item.element, "selected");
      });
      addClass(optionEl, "selected");
      this.selectedOptions = [option];
    }
    this._renderSelectedItems();
    this.updateSelectValue();
  }
};
NiceSelect.prototype.updateSelectValue = function () {
  if (this.multiple) {
    var select = this.el;
    this.selectedOptions.forEach(function (item) {
      var el = select.querySelector("option[value=\"".concat(item.data.value, "\"]"));
      if (el) {
        el.setAttribute("selected", true);
      }
    });
  } else if (this.selectedOptions.length > 0) {
    this.el.value = this.selectedOptions[0].data.value;
  }
  triggerChange(this.el);
};
NiceSelect.prototype.resetSelectValue = function () {
  if (this.multiple) {
    var select = this.el;
    this.selectedOptions.forEach(function (item) {
      var el = select.querySelector("option[value=\"".concat(item.data.value, "\"]"));
      if (el) {
        el.removeAttribute("selected");
      }
    });
  } else if (this.selectedOptions.length > 0) {
    this.el.selectedIndex = -1;
  }
  triggerChange(this.el);
};
NiceSelect.prototype._onClickedOutside = function (e) {
  if (!this.dropdown.contains(e.target)) {
    removeClass(this.dropdown, "open");
    triggerModalClose(this.el);
  }
};
NiceSelect.prototype._onKeyPressed = function (e) {
  // Keyboard events

  var focusedOption = this.dropdown.querySelector(".focus");
  var open = hasClass(this.dropdown, "open");

  // Enter
  if (e.keyCode == 13) {
    if (open) {
      triggerClick(focusedOption);
    } else {
      triggerClick(this.dropdown);
    }
  } else if (e.keyCode == 40) {
    // Down
    if (!open) {
      triggerClick(this.dropdown);
    } else {
      var next = this._findNext(focusedOption);
      if (next) {
        var t = this.dropdown.querySelector(".focus");
        removeClass(t, "focus");
        addClass(next, "focus");
      }
    }
    e.preventDefault();
  } else if (e.keyCode == 38) {
    // Up
    if (!open) {
      triggerClick(this.dropdown);
    } else {
      var prev = this._findPrev(focusedOption);
      if (prev) {
        var t = this.dropdown.querySelector(".focus");
        removeClass(t, "focus");
        addClass(prev, "focus");
      }
    }
    e.preventDefault();
  } else if (e.keyCode == 27 && open) {
    // Esc
    triggerClick(this.dropdown);
  } else if (e.keyCode === 32 && open) {
    // Space
    return false;
  }
  return false;
};
NiceSelect.prototype._findNext = function (el) {
  if (el) {
    el = el.nextElementSibling;
  } else {
    el = this.dropdown.querySelector(".list .option");
  }
  while (el) {
    if (!hasClass(el, "disabled") && el.style.display != "none") {
      return el;
    }
    el = el.nextElementSibling;
  }
  return null;
};
NiceSelect.prototype._findPrev = function (el) {
  if (el) {
    el = el.previousElementSibling;
  } else {
    el = this.dropdown.querySelector(".list .option:last-child");
  }
  while (el) {
    if (!hasClass(el, "disabled") && el.style.display != "none") {
      return el;
    }
    el = el.previousElementSibling;
  }
  return null;
};
NiceSelect.prototype._onSearchChanged = function (e) {
  var open = hasClass(this.dropdown, "open");
  var text = e.target.value;
  text = text.toLowerCase();
  if (text == "") {
    this.options.forEach(function (item) {
      item.element.style.display = "";
    });
  } else if (open) {
    var matchReg = new RegExp(text);
    this.options.forEach(function (item) {
      var optionText = item.data.text.toLowerCase();
      var matched = matchReg.test(optionText);
      item.element.style.display = matched ? "" : "none";
    });
  }
  this.dropdown.querySelectorAll(".focus").forEach(function (item) {
    removeClass(item, "focus");
  });
  var firstEl = this._findNext(null);
  addClass(firstEl, "focus");
};
function bind(el, options) {
  return new NiceSelect(el, options);
}

},{}]},{},[1])


//# sourceMappingURL=main.min.js.map
